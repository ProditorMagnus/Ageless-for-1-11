#textdomain wesnoth-Ageless_Era
##### | Ageless Heros - MP Era

[era]
    id=Ageless Heroes
    name= _ "@Ageless Heroes"
    require_era=yes
    description=_ "The largest era ever made featuring Default Era with the Khalifate faction, Extended Era, Archaic Era, the Era of the Future, BEEM, the Era of Four Moons, the Yokai faction, the Dark Legion, the Desert Elves, the Steelhive faction, the Era of Myths, Feudal Era, Imperial Era, the Era of Strife, the Era of Magic, the Era of Chaos, and Mercenaries Era."
    [event]
        name=prestart
        [set_variable]
            name=era_id
            value="Ageless Heroes"
        [/set_variable]
    [/event]
    {~add-ons/Ageless_Era/eras/era_events.cfg}
    {TURNS_OVER_ADVANTAGE}
    {RANDOM_WITHOUT ({BFW_FACTIONS},AE_side_ext_loyalist,AE_side_ext_sylvans,AE_side_ext_dwarves,AE_side_ext_outlaws,AE_side_ext_northerns,AE_side_ext_undead,AE_side_agl_desertelves,AE_side_imp_cavernei,AE_side_chs_quenoth,AE_side_chs_sylvans,AE_side_chs_wildhumans) Defaultlike AE_set_notdefaultlike}
    [multiplayer_side]
        id=AE_set_notdefault
        name= _"Random"
        image="units/random-dice.png"
        {MAGENTA_IS_THE_TEAM_COLOR}
        random_faction=yes
        except={BFW_FACTIONS}
    [/multiplayer_side]
    {RANDOM_ONLY {AE_FACTIONS} Ageless AE_set_ae}
    {RANDOM_ONLY {BMR_FACTIONS} Archaic AE_set_bmr}
    {RANDOM_ONLY {BEEM_FACTIONS} BEEM AE_set_beem}
    {RANDOM_ONLY {BFW_FACTIONS} Default AE_set_default}
    {RANDOM_ONLY {EE_FACTIONS} EE AE_set_ee}
    {RANDOM_ONLY {EFM_FACTIONS} EFM AE_set_efm}
    {RANDOM_ONLY {EoC_FACTIONS} EoC AE_set_eoc}
    {RANDOM_ONLY {EoM_FACTIONS} EoM AE_set_eom}
    {RANDOM_ONLY {EoMa_FACTIONS} EoMa AE_set_eoma}
    {RANDOM_ONLY {EoS_FACTIONS} EoS AE_set_eos}
    {RANDOM_ONLY {EotF_FACTIONS} EotF AE_set_eotf}
    {RANDOM_ONLY {FE_FACTIONS} FE AE_set_fe}
    {RANDOM_ONLY {IE_FACTIONS} IE AE_set_ie}
    {RANDOM_ONLY {ME_FACTIONS} ME AE_set_me}
    {HEROS_SIDE AE}
    {HEROS_SIDE BMR}
    {HEROS_SIDE BEEM}
    {HEROS_SIDE BFW}
    {HEROS_SIDE EE}
    {HEROS_SIDE EFM}
    {HEROS_SIDE EoC}
    {HEROS_SIDE EoM}
    {HEROS_SIDE EoMa}
    {HEROS_SIDE EoS}
    {HEROS_SIDE EotF}
    {HEROS_SIDE FE}
    {HEROS_SIDE IE}
    {HEROS_SIDE ME}

    # default macro checks only for 4mp, here MIGHT be 3 somewhere too

    [event]
        name=prestart

        [store_unit]
            [filter]
                canrecruit=yes
                formula="$this_unit.max_moves<5"
            [/filter]

            kill=yes
            variable=leaders_to_make_quick
        [/store_unit]

        {FOREACH leaders_to_make_quick i}
            [if]
                # The variable check is done here instead of in the [store_unit]
                # so that all boolean values work
                [variable]
                    name=leaders_to_make_quick[$i].variables.dont_make_me_quick
                    boolean_equals=yes
                [/variable]

                [then]
                    [unstore_unit]
                        variable=leaders_to_make_quick[$i]
                    [/unstore_unit]
                [/then]

                [else]
                    [set_variables]
                        name=temp

                        [literal]
                            {TRAIT_QUICK}
                        [/literal]
                    [/set_variables]

                    [set_variables]
                        name=leaders_to_make_quick[$i].modifications.trait
                        mode=append

                        [insert_tag]
                            name=literal
                            variable=temp.trait
                        [/insert_tag]
                    [/set_variables]

                    {CLEAR_VARIABLE leaders_to_make_quick[$i].max_moves,leaders_to_make_quick[$i].moves,leaders_to_make_quick[$i].max_hitpoints,leaders_to_make_quick[$i].hitpoints}

                    [unstore_unit]
                        variable=leaders_to_make_quick[$i]
                    [/unstore_unit]
                [/else]
            [/if]
        {NEXT i}

        {CLEAR_VARIABLE leaders_to_make_quick,temp}
    [/event]
[/era]
