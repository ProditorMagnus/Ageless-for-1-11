#textdomain wesnoth-Ageless_Era

#define PK_ABILITY_SPREAD
    [dummy]
        id=spread
        name= _ "spread"
        description=_" This unit will automatically disease any enemy adjacent to it at the beggining of its turn."
    [/dummy]
[/abilities]
[event]
    first_time_only=no
    name=turn refresh
    [store_unit]
        [filter]
            [filter_adjacent]
                side=$side_number
                ability=spread
                is_enemy=yes
            [/filter_adjacent]
        [/filter]
        variable=victims
    [/store_unit]
    {FOREACH victims i}
        [if]
            [variable]
                name=victims[$i].status.not_living
                not_equals=yes
            [/variable]
            [then]
                [set_variable]
                    name=victims[$i].status.poisoned
                    value=yes
                [/set_variable]
                [unstore_unit]
                    variable=victims[$i]
                    text=_ "poisoned"
                    {COLOR_HARM}
                [/unstore_unit]
                [sound]
                    name=poison.ogg
                [/sound]
                [delay]
                    time=400
                [/delay]
            [/then]
        [/if]
    {NEXT i}
    {CLEAR_VARIABLE victims}
[/event]
[+abilities]
#enddef
