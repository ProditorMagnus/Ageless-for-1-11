#textdomain wesnoth-Ageless_Era

#define PK_WEAPON_SPECIAL_LATCH
    [dummy]
        id=latch
        name= _ "latch"
        name_inactive= _ "latch"
        description=_" When this unit hits an enemy with this attack it is incapacitated by latching onto the enemies body, a live enemy can easily remove a parasite latched to it. If this unit kills an enemy when it latches onto it, it can burrow inside the body to make a Cadaver"
        description_inactive=_" When this unit hits an enemy with this attack it is incapacitated by latching onto the enemies body, a live enemy can easily remove a parasite latched to it. If this unit kills an enemy when it latches onto it, it can burrow inside the body to make a Cadaver"
    [/dummy]
#enddef
#ifndef PK_WEAPON_SPECIAL_LATCH_EVENT
#define PK_WEAPON_SPECIAL_LATCH_EVENT ATTACK_NAME
    [event]
        name=attacker_hits
        first_time_only=no
        [filter_attack]
            name={ATTACK_NAME}
        [/filter_attack]
        {VARIABLE latch_{ATTACK_NAME} true}
    [/event]
    [event]
        name=attacker_hits
        first_time_only=no
        [filter_attack]
            [not]
                name={ATTACK_NAME}
            [/not]
        [/filter_attack]
        {VARIABLE latch_{ATTACK_NAME} false}
    [/event]
    [event]
        name=die
        first_time_only=no
        [filter]
            [not]
                type="AE Blight Parasite, AE Blight Virus"
            [/not]
        [/filter]
        [if]
            [variable]
                name=latch_{ATTACK_NAME}
                boolean_equals=true
            [/variable]
            [variable]
                name=unit.id
                not_equals=$second_unit.id
            [/variable]
            [then]
                [kill]
                    id=$second_unit.id
                    animate=yes
                [/kill]
                [unit]
                    type=AE Blight Cadaver
                    side=$second_unit.side
                    x,y=$x2,$y2
                [/unit]
            [/then]
        [/if]
    [/event]
#enddef
#endif
